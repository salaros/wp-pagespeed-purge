{"version":3,"sources":["wp-purge-pagespeed-button.js"],"names":["jQuery","document","ready","$","pagespeed_purge_error","spinner","pagespeed_purge_reset","addClass","removeClass","click","event","preventDefault","this","find","ajax","method","url","location","origin","done","msg","indexOf","fail","always","setTimeout"],"mappings":"AAAAA,OAAOC,UAAUC,MAAM,SAAUC,GAuC/B,SAASC,EAAsBC,GAC7BC,EAAsBD,GACtBA,EAAQE,SAAS,SAQnB,SAASD,EAAsBD,GAC7BA,EAAQG,YAAY,QAAQA,YAAY,WAAWA,YAAY,SAhDjEL,EAAE,iCACCM,MAAM,SAAUC,GACfA,EAAMC,iBAEN,IA4B6BN,EA5BzBA,EAAUF,EAAES,MAAMC,KAAK,KAyB3B,OAIFP,EAD+BD,EA3BLA,GA6B1BA,EAAQE,SAAS,QAzBfJ,EAAEW,KAAK,CACHC,OAAQ,QACRC,IAAKf,SAASgB,SAASC,OAAS,OAEjCC,KAAK,SAAUC,GA6BtB,IAAiCf,EA5BrBe,IAAoC,EAA7BA,EAAIC,QAAQ,eA6B7Bf,EAD+BD,EA3BCA,GA6BhCA,EAAQE,SAAS,YA3BTH,EAAsBC,KAGzBiB,KAAK,WACJlB,EAAsBC,KAEvBkB,OAAO,WACNC,WAAW,WACTlB,EAAsBD,IACrB,QAGA","file":"wp-purge-pagespeed-button.min.js","sourcesContent":["jQuery(document).ready(function ($) {\n\n  $('#wp-admin-bar-pagespeed_purge')\n    .click(function (event) {\n      event.preventDefault();\n\n      var spinner = $(this).find('a');\n      pagespeed_purge_animate(spinner);\n\n      // Purge cache for the entire website\n      // More info: https://modpagespeed.com/doc/system#purge_cache\n      $.ajax({\n          method: \"PURGE\",\n          url: document.location.origin + '/*'\n        })\n        .done(function (msg) {\n          if (msg && msg.indexOf(\"successful\") > -1) {\n            pagespeed_purge_success(spinner);\n          } else {\n            pagespeed_purge_error(spinner);\n          }\n        })\n        .fail(function () {\n          pagespeed_purge_error(spinner);\n        })\n        .always(function () {\n          setTimeout(function () {\n            pagespeed_purge_reset(spinner);\n          }, 750);\n        });\n\n      return false;\n    });\n\n  function pagespeed_purge_animate(spinner) {\n    pagespeed_purge_reset(spinner);\n    spinner.addClass('spin');\n  }\n\n  function pagespeed_purge_error(spinner) {\n    pagespeed_purge_reset(spinner);\n    spinner.addClass('error');\n  }\n\n  function pagespeed_purge_success(spinner) {\n    pagespeed_purge_reset(spinner);\n    spinner.addClass('success');\n  }\n\n  function pagespeed_purge_reset(spinner) {\n    spinner.removeClass('spin').removeClass('success').removeClass('error');\n  }\n\n});"]}